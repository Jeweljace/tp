@startuml
title AddMeasurementCommand — Sequence for "measure ..."

skinparam shadowing false
skinparam defaultFontName Arial
skinparam sequence {
  LifeLineBorderColor black
  BoxBorderColor #90A4AE
  BoxBackgroundColor #F5F7FA
  ArrowColor #455A64
  ArrowThickness 1
}

actor User
participant ":Ui" as UI  #E3F2FD
participant ":AddMeasurementCommand" as AMC #C8E6C9
participant ":EntryList" as LIST #FFFDE7
participant ":Storage" as ST   #FCE4EC

User -> UI : confirm command
activate UI
UI -> AMC : execute(list, storage)
activate AMC

opt invalid input (missing/≤0)
  AMC --> UI : throw CommandException("Waist and hips must be positive ...")
  deactivate AMC
  deactivate UI
else valid input
  AMC -> LIST : add(new BodyMeasurementEntry(..., timestamp=now))
  activate LIST
  LIST --> AMC : added entry
  deactivate LIST

  AMC -> ST : save(list)
  activate ST
  ST --> AMC : ok
  deactivate ST

  AMC --> UI : CommandResult("Added: [MEASURE] waist=70cm, ...")
  deactivate AMC
  deactivate UI
end
@enduml
